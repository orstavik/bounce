<script src="../MonkeyPatch/MonkeyPatch.js"></script>
<script src="../ParserBreakEvent/ParserBreakEvent.js"></script>
<script src="../constructionFrame/constructionFrame.js"></script>
<script src="../childChanged/ChildChangedCallback.js"></script>
<script src="../EventTarget/EventTarget.js"></script>
<script src="ElementEvent.js"></script>
<script src="HTMLEventElement.js"></script>
<script src="../EventLoop/EventLoop.js"></script>

<event-loop>
    <event :created="1636554478570" :type="click" :composed="true" :bubbles="true"></event>
</event-loop>

<body>
<div></div>
</body>

<script>

  window.addEventListener("error", e => {
    e.preventDefault();
    const severalEventLoops = !!document.querySelectorAll("event-loop").length > 1;
    console.log("several event-loops at the same time? : ", severalEventLoops, "Error");
  });

  const divElement = document.querySelector("div");

  console.log("Two event-loop elements");
  document.body.appendChild(document.createElement("event-loop"));

  console.log("Append to illegal element");
  divElement.appendChild(document.createElement("event-loop"));

  console.log("Dispatch new event on element without :target attribute");
  divElement.dispatchEvent(new MouseEvent('click', {composed: true, bubbles: true}));
</script>
