<h1>Test for ready and childChanged callbacks</h1>
<h3>beforeScriptExecute</h3>
<test-html test="../beforeScriptExecute/test1.html">
  <script expected>
    ["1", "2", "3", "4", "5", "6", "html", "interactive"]
  </script>
</test-html>
<test-html test="../beforeScriptExecute/test1_macro.html">
  <script expected>
    ["1", "mm1", "2", "mm2", "3", "mm3", "4", "mm4", "5", "mm5", "6", "mm6", "7", "mm7", "interactive"]
  </script>
</test-html>
<test-html test="../beforeScriptExecute/test2_connectedCallback.html">
  <script expected>
    ["1", "mm1", "2", "mm2", "3", "mm3", "4", "mm4", "5", "mm5", "6", "mm6", "7", "mm7", "8", "mm8", "9", "mm9", "interactive"]
  </script>
</test-html>
<test-html test="../beforeScriptExecute/test3_connectedCallback.html">
  <script expected>
    ["break", "connected", "connected", "the end", "interactive"]
  </script>
</test-html>
<h3>ConstructionFrame</h3>
<test-html test="../constructionFrame/test1.html">
  <script expected>
    [
      [1, "Upgrade#start"],
      [1, "Upgrade#end"],
      [1, "Upgrade#complete"],
      [2, "Predictive#start"],
      [2, "Predictive#start-constructor"],
      [2, "Predictive#end"],
      [2, "Predictive#complete"],
      [3, "Predictive#start"],
      [3, "Predictive#start-constructor"],
      [3, "Predictive#end"],
      [3, "Predictive#complete"],
      [4, "Predictive#start"],
      [4, "Predictive#start-constructor"],
      [5, "Predictive#start"],
      [5, "Predictive#start-constructor"],
      [5, "Predictive#end"],
      [5, "Predictive#complete"],
      [4, "Predictive#end"],
      [4, "Predictive#complete"],
      [6, "Predictive#start"],
      [6, "Predictive#start-constructor"],
      [7, "Predictive#start"],
      [7, "Predictive#start-constructor"],
      [7, "Predictive#end"],
      [7, "Predictive#complete"],
      [6, "Predictive#end"],
      [6, "Predictive#complete"],
      [8, "Predictive#start"],
      [8, "Predictive#start-constructor"],
      [9, "Predictive#start"],
      [9, "Predictive#start-constructor"],
      [9, "Predictive#end"],
      [9, "Predictive#complete"],
      [8, "Predictive#end"],
      [8, "Predictive#complete"],
      [10, "Predictive#start"],
      [10, "Predictive#start-constructor"],
      [10, "Predictive#end"],
      [10, "Predictive#complete"],
      "script",
      [11, "Predictive#start"],
      [11, "Predictive#start-constructor"],
      [11, "Predictive#end"],
      [11, "Predictive#complete"],
      "dom interactive"
    ]
  </script>
</test-html>
<test-html test="../constructionFrame/test2.html">
  <script expected>
    [
      [1, "Upgrade#start"],
      [1, "Upgrade#end[]"],
      [1, "Upgrade#complete"],
      [2, "Upgrade#start"],
      [2, "Upgrade#end[]"],
      [2, "Upgrade#complete"],
      [3, "Upgrade#start"],
      [3, "Upgrade#end[]"],
      [3, "Upgrade#complete"],

      [4, "Predictive#start"],
      [4, "Predictive#startconstructor"],
      [4, "Predictive#end[INNER-COMP]"],
      [4, "Predictive#complete"],

      [5, "Predictive#start"],
      [5, "Predictive#startconstructor start"],
      [6, "Predictive#start, InnerHTML#start"],
      [6, "Predictive#start, InnerHTML#startconstructor"],
      [6, "Predictive#start, InnerHTML#end[INNER-COMP]"],
      [7, "Predictive#start, InsertAdjacentHTML#start"],
      [7, "Predictive#start, InsertAdjacentHTML#end[H1]"],
      [5, "Predictive#startconstructor end"],
      [5, "Predictive#end[MIDDLE-COMP]"],
      [5, "Predictive#complete"],
      [6, "Predictive#complete, InnerHTML#complete"],
      [7, "Predictive#complete, InsertAdjacentHTML#complete"],

      [8, "Predictive#start"],
      [8, "Predictive#startconstructor start"],
      [9, "Predictive#start, DocumentCreateElement#start"],
      [9, "Predictive#start, DocumentCreateElement#startconstructor start"],
      [10, "Predictive#start, DocumentCreateElement#start, InnerHTML#start"],
      [10, "Predictive#start, DocumentCreateElement#start, InnerHTML#startconstructor"],
      [10, "Predictive#start, DocumentCreateElement#start, InnerHTML#end[INNER-COMP]"],
      [11, "Predictive#start, DocumentCreateElement#start, InsertAdjacentHTML#start"],
      [11, "Predictive#start, DocumentCreateElement#start, InsertAdjacentHTML#end[H1]"],
      [9, "Predictive#start, DocumentCreateElement#startconstructor end"],
      [9, "Predictive#start, DocumentCreateElement#end[MIDDLE-COMP]"],
      [12, "Predictive#start, CloneNode#start"],
      [12, "Predictive#start, CloneNode#startconstructor start"],
      [13, "Predictive#start, CloneNode#start, InnerHTML#start"],
      [13, "Predictive#start, CloneNode#start, InnerHTML#startconstructor"],
      [13, "Predictive#start, CloneNode#start, InnerHTML#end[INNER-COMP]"],
      [14, "Predictive#start, CloneNode#start, InsertAdjacentHTML#start"],
      [14, "Predictive#start, CloneNode#start, InsertAdjacentHTML#end[H1]"],
      [12, "Predictive#start, CloneNode#startconstructor end"],
      [12, "Predictive#start, CloneNode#end[MIDDLE-COMP]"],
      [8, "Predictive#startconstructor end"],
      [8, "Predictive#end[OUTER-COMP]"],
      [8, "Predictive#complete"],
      [9, "Predictive#complete, DocumentCreateElement#complete"],
      [10, "Predictive#complete, DocumentCreateElement#complete, InnerHTML#complete"],
      [11, "Predictive#complete, DocumentCreateElement#complete, InsertAdjacentHTML#complete"],
      [12, "Predictive#complete, CloneNode#complete"],
      [13, "Predictive#complete, CloneNode#complete, InnerHTML#complete"],
      [14, "Predictive#complete, CloneNode#complete, InsertAdjacentHTML#complete"]
    ]
  </script>
</test-html>
<test-html test="../constructionFrame/test1_upgrade.html">
  <script expected>
    [
      "script",
      [1, "Upgrade#start"],
      [1, "Upgrade#start-constructor"],
      [1, "Upgrade#end[WEB-COMP]"],
      [1, "Upgrade#complete"],
      [2, "Upgrade#start"],
      [2, "Upgrade#start-constructor"],
      [2, "Upgrade#end[WEB-COMP]"],
      [2, "Upgrade#complete"],
      [3, "Upgrade#start"],
      [3, "Upgrade#start-constructor"],
      [3, "Upgrade#end[WEB-COMP]"],
      [3, "Upgrade#complete"],
      [4, "Upgrade#start"],
      [4, "Upgrade#start-constructor"],
      [4, "Upgrade#end[WEB-COMP]"],
      [4, "Upgrade#complete"],
      [5, "Upgrade#start"],
      [5, "Upgrade#start-constructor"],
      [5, "Upgrade#end[WEB-COMP]"],
      [5, "Upgrade#complete"],
      [6, "Upgrade#start"],
      [6, "Upgrade#start-constructor"],
      [6, "Upgrade#end[WEB-COMP]"],
      [6, "Upgrade#complete"],
      [7, "Upgrade#start"],
      [7, "Upgrade#start-constructor"],
      [7, "Upgrade#end[WEB-COMP]"],
      [7, "Upgrade#complete"],
      [8, "Upgrade#start"],
      [8, "Upgrade#start-constructor"],
      [8, "Upgrade#end[WEB-COMP]"],
      [8, "Upgrade#complete"],
      [9, "Upgrade#start"],
      [9, "Upgrade#start-constructor"],
      [9, "Upgrade#end[WEB-COMP]"],
      [9, "Upgrade#complete"],
      [10, "Upgrade#start"],
      [10, "Upgrade#start-constructor"],
      [10, "Upgrade#end[WEB-COMP]"],
      [10, "Upgrade#complete"],
      "dom interactive"
    ]
  </script>
</test-html>
<test-html test="../constructionFrame/error_predictive_simple.html">
  <script expected>
    [
      "Upgrade#start",
      "Upgrade#end",
      "Upgrade#complete",
      "Predictive#start",
      "Predictive#start-constructor",
      "error",
      "Predictive#end",
      "Predictive#complete",
      "script"
    ]
  </script>
</test-html>
<test-html test="../constructionFrame/error_predictive_and_createElement.html">
  <script expected>
    [
      "Upgrade#start",
      "Upgrade#end",
      "Upgrade#complete",
      "Upgrade#start",
      "Upgrade#end",
      "Upgrade#complete",
      "Predictive#start",
      "Predictive#start-constructor-outer",
      "Predictive#start, DocumentCreateElement#start",
      "Predictive#start, DocumentCreateElement#start-constructor-inner",
      "error",
      "Predictive#start, DocumentCreateElement#end",
      "Predictive#end",
      "Predictive#complete",
      "Predictive#complete, DocumentCreateElement#complete",
      "script"]
  </script>
</test-html>
<test-html test="../constructionFrame/error_upgrade.html">
  <script expected>
    [
      "script",
      "Upgrade#start",
      "Upgrade#start-constructor-inner",
      "error",
      "Upgrade#end",
      "Upgrade#complete",
      "Upgrade#start",
      "Upgrade#start-constructor-inner",
      "error",
      "Upgrade#end",
      "Upgrade#complete"
    ]
  </script>
</test-html>
<test-html test="../constructionFrame/error_upgrade_inner_adjacent_clone.html">
  <script expected>
    [
      "script",
      "Upgrade#start",
      "Upgrade#start-constructor-inner",
      "Upgrade#start-attribute-inner",
      "error",
      "Upgrade#end",
      "Upgrade#complete",
      "Upgrade#start",
      "Upgrade#end",
      "Upgrade#complete",
      "Upgrade#start",
      "Upgrade#start-outer-constructor",
      "Upgrade#start, DocumentCreateElement#start",
      "Upgrade#start, DocumentCreateElement#start-constructor-inner",
      "Upgrade#start, DocumentCreateElement#end",
      "Upgrade#start, CloneNode#start",
      "Upgrade#start, CloneNode#start-constructor-inner",
      "error",
      "Upgrade#start, CloneNode#end",
      "Upgrade#start, InnerHTML#start",
      "Upgrade#start, InnerHTML#start-constructor-inner",
      "Upgrade#start, InnerHTML#start-attribute-inner",
      "error",
      "Upgrade#start, InnerHTML#end",
      "Upgrade#start, InsertAdjacentHTML#start",
      "Upgrade#start, InsertAdjacentHTML#start-constructor-inner",
      "Upgrade#start, InsertAdjacentHTML#start-attribute-inner",
      "error",
      "Upgrade#start, InsertAdjacentHTML#end",
      "Upgrade#start-outer-constructor-end",
      "Upgrade#end",
      "Upgrade#complete",
      "Upgrade#complete, DocumentCreateElement#complete",
      "Upgrade#complete, CloneNode#complete",
      "Upgrade#complete, InnerHTML#complete",
      "Upgrade#complete, InsertAdjacentHTML#complete"
    ]
  </script>
</test-html>


<test-html test="../constructionFrame/test_insertAdjacentHTML_emptyContext.html">
    <script expected>
      [
        ["#comment"],
        ["#text"],
        ["H5", "#text"],
        ["#text"],
        ["H6", "#text"]
      ]
    </script>
</test-html>

<test-html test="../constructionFrame/test_insertAdjacentHTML_context.html">
    <script expected>
      [
        ["#text", "#comment"],
        ["#text"],
        ["H5", "#text"],
        ["#text", "#text"],
        ["H6", "#text"]
      ]
    </script>
</test-html>

<test-html test="../constructionFrame/test_insertAdjacentHTML_context_elements.html">
    <script expected>
      [
        [],
        [],
        ["H5"],
        [],
        ["H6"]
      ]
    </script>
</test-html>

<test-html test="../constructionFrame/test_insertAdjacentHTML_emptyContext_elements.html">
    <script expected>
      [
        [],
        [],
        ["H5"],
        [],
        ["H6"]
      ]
    </script>
</test-html>

<h5>todo insertAdjacentHTML, listing .nodes() in frame-end</h5>
<h5>todo add .elements() readable from frame-end</h5>

<h3>attributeReadyCallback and childReadyCallback</h3>
<test-html test="../constructionReady/test1.html">
  <script expected>
    [
      [1, "constructor"],
      [1, "attributeReady"],
      [1, "attributeChanged"],
      [1, "connected"],
      [1, "childReady"],
      [2, "constructor"],
      [2, "attributeReady"],
      [2, "connected"],
      [2, "childReady"],
      [3, "constructor"],
      [3, "attributeReady"],
      [3, "connected"],
      [4, "constructor"],
      [4, "attributeReady"],
      [4, "connected"],
      [4, "childReady"],
      [3, "childReady"],
      [5, "constructor"],
      [5, "attributeReady"],
      [5, "connected"],
      [6, "constructor"],
      [6, "attributeReady"],
      [6, "connected"],
      [5, "childReady"],
      [6, "childReady"],
      [7, "constructor"],
      [7, "attributeReady"],
      [7, "connected"],
      [8, "constructor"],
      [8, "attributeReady"],
      [8, "connected"],
      [7, "childReady"],
      [8, "childReady"],
      [9, "constructor"],
      [9, "attributeReady"],
      [9, "connected"],
      [9, "childReady"],
      "script",
      [10, "constructor"],
      [10, "attributeReady"],
      [10, "connected"],
      [10, "childReady"],
      "dom interactive"
    ]
  </script>
</test-html>

<test-html test="../constructionReady/test2.html">
  <script expected>
    [
      [1, "INNER-COMP", "constructor"],
      [1, "INNER-COMP", "attributeReady"],
      [1, "INNER-COMP", "connected"],
      [1, "INNER-COMP", "childReady"],
      null,
      [2, "MIDDLE-COMP", "constructor"],
      [3, "INNER-COMP", "constructor"],
      [3, "INNER-COMP", "attributeReady"],
      [2, "MIDDLE-COMP", "attributeReady"],
      [2, "MIDDLE-COMP", "connected"],
      [3, "INNER-COMP", "connected"],
      [2, "MIDDLE-COMP", "childReady"],
      [3, "INNER-COMP", "childReady"],
      null,
      [4, "OUTER-COMP", "constructor"],
      [5, "MIDDLE-COMP", "constructor"],
      [6, "INNER-COMP", "constructor"],
      [6, "INNER-COMP", "attributeReady"],
      [5, "MIDDLE-COMP", "attributeReady"],
      [7, "MIDDLE-COMP", "constructor"],
      [8, "INNER-COMP", "constructor"],
      [8, "INNER-COMP", "attributeReady"],
      [7, "MIDDLE-COMP", "attributeReady"],
      [4, "OUTER-COMP", "attributeReady"],
      [4, "OUTER-COMP", "connected"],
      [7, "MIDDLE-COMP", "connected"],
      [8, "INNER-COMP", "connected"],
      [4, "OUTER-COMP", "childReady"],
      [5, "MIDDLE-COMP", "childReady"],
      [6, "INNER-COMP", "childReady"],
      [7, "MIDDLE-COMP", "childReady"],
      [8, "INNER-COMP", "childReady"]
    ]
  </script>
</test-html>

<h3>childChangedCallback</h3>
<test-html test="../childChanged/testBeginnings.html">
  <script expected>
    [
      [1, "INNER-COMP", "constructor", null],
      [1, "INNER-COMP", "childChanged", {}],
      null,
      [2, "MIDDLE-COMP", "constructor", null],
      [3, "INNER-COMP", "constructor", null],
      [2, "MIDDLE-COMP", "childChanged", {}],
      [3, "INNER-COMP", "childChanged", {}],
      null,
      [4, "OUTER-COMP", "constructor", null],
      [5, "MIDDLE-COMP", "constructor", null],
      [6, "INNER-COMP", "constructor", null],
      [7, "MIDDLE-COMP", "constructor", null],
      [8, "INNER-COMP", "constructor", null],
      [4, "OUTER-COMP", "childChanged", {}],
      [5, "MIDDLE-COMP", "childChanged", {}],
      [6, "INNER-COMP", "childChanged", {}],
      [7, "MIDDLE-COMP", "childChanged", {}],
      [8, "INNER-COMP", "childChanged", {}]
    ]
  </script>
</test-html>

<test-html test="../childChanged/testDynamic.html">
  <script expected>
    [
      ["constructor", "OUTER-COMP"],
      ["constructor", "MIDDLE-COMP"],
      ["constructor", "INNER-COMP"],
      ["connected", "OUTER-COMP"],
      ["connected", "MIDDLE-COMP"],
      ["connected", "INNER-COMP"],
      ["childChanged", "OUTER-COMP", 0],
      ["childChanged", "MIDDLE-COMP", 0],
      ["childChanged", "INNER-COMP", 0],
      "before",
      ["childChanged", "OUTER-COMP", 1],
      ["childChanged", "MIDDLE-COMP", 1],
      ["childChanged", "INNER-COMP", 1],
      "after"
    ]
  </script>
</test-html>

<test-html test="../childChanged/testAssignNodes.html">
  <script expected>
    [
      ["constructor", "INNER-COMP", [], [], null],
      ["constructor", "MIDDLE-COMP", [], [], null],
      ["constructor", "OUTER-COMP", [], [], null],
      ["connected", "OUTER-COMP", [], [], null],
      ["connected", "MIDDLE-COMP", [], ["SLOT"], null],
      ["connected", "INNER-COMP", [], ["SLOT"], null],
      ["childChanged before", "OUTER-COMP", [], [], ["H1"]],
      ["childChanged after", "OUTER-COMP", ["H1"], ["H1"], ["H1"]],
      ["childChanged before", "MIDDLE-COMP", ["H1"], ["SLOT"], ["H1"]],
      ["childChanged after", "MIDDLE-COMP", ["H1"], ["SLOT"], ["H1"]],
      ["childChanged before", "INNER-COMP", ["H1"], ["SLOT"], ["H1"]],
      ["childChanged after", "INNER-COMP", ["H1"], ["SLOT"], ["H1"]]
    ]
  </script>
</test-html>

<test-html test="../childChanged/testAssignNodes2.html">
  <script expected>
    [
      ["constructor", "COMP-A", 0, null],
      ["connected", "COMP-A", 0, null],
      ["constructor", "COMP-B", 0, null],
      ["connected", "COMP-B", 0, null],
      ["constructor", "COMP-C", 0, null],
      ["connected", "COMP-C", 0, null],
      ["childChanged", "COMP-C", 3, 3],
      ["childChanged", "COMP-B", 5, 5],
      ["childChanged", "COMP-A", 5, 5]
    ]
  </script>
</test-html>

<script type="module" src="TestComponent.js"></script>
