<script src="../MonkeyPatch/MonkeyPatch.js"></script>
<script src="../EventTarget/EventTarget.js"></script>
<script src="../HTMLEventElement/ElementEvent.js"></script>
<script src="../HTMLEventElement/HTMLEventElement.js"></script>
<script src="HTMLTaskElement.js"></script>
<script src="../EventLoop/EventLoop.js"></script>

<event-loop>
    <task :created="1631618374265" :delay="2000" :start="1631789839346" :cb="dispatchEvent"></task>
</event-loop>

<body :uid="0">
<h1 :uid="1">hello sunshine</h1>
</body>

<script>

  window.dispatchEvent = async function dispatchEvent() {
    const h1 = document.querySelector("h1");
    await h1.dispatchEvent(new MouseEvent('click', {composed: true, bubbles: true}));
    console.log([...document.querySelector("event-loop").children].map(c => c.hasAttribute(":finished") && c.hasAttribute(":started")))
  }

</script>
